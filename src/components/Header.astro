---
import ThemeButton from './ThemeButton.astro';

const user = Astro.props?.user || null;
const lang = Astro.props?.lang || 'el';
const altArticle = Astro.props?.altArticle || null;
const disableLangSwitch = Astro.props?.disableHeaderLangSwitch || false;

const isGreek = lang === 'el';
const base = isGreek ? '/el' : '/en';

const currentPath = Astro.url.pathname;
const isHome = currentPath === '/';
const isArticles = currentPath.includes('/blog') && !currentPath.includes('/editor');
const isContact = currentPath.includes('/contact');
const isDashboard = currentPath.includes('/dashboard');
const isEditor = currentPath.includes('/editor');

let langSwitchHref = isGreek ? '/en' : '/el';

if (isArticles && altArticle?.slug && altArticle?.lang) {
  langSwitchHref = `/${altArticle.lang}/blog/${altArticle.slug}`;
} else {
  const pathWithoutLang = currentPath.replace(/^\/(el|en)/, '');
  langSwitchHref = `/${isGreek ? 'en' : 'el'}${pathWithoutLang}`;
}
---

<header class="w-full border-b border-zinc-200 bg-white dark:bg-[#1a1a1a] text-black dark:text-white shadow-sm transition-colors duration-300">
  <div class="max-w-screen-xl mx-auto px-4 sm:px-6 py-3 sm:py-4 flex flex-col sm:flex-row items-center sm:items-start justify-between gap-3">
    
    <!-- Î›Î¿Î³ÏŒÏ„Ï…Ï€Î¿ -->
    <a href="/" class="text-3xl tracking-tight leading-none text-center sm:text-left" style="font-family: 'Lora', serif;">
      <span class="text-black dark:text-white">Hit</span><span class="text-[#50c7c2]">lift</span>
    </a>

    <!-- Î Î»Î¿Î®Î³Î·ÏƒÎ· + Î”ÎµÎ¾Î¹Î¬ Î–ÏÎ½Î· -->
    <div class="flex flex-wrap justify-center sm:justify-end items-center gap-1 sm:gap-3 text-xs sm:text-base text-black/80 dark:text-white/80">
      <a href="/" class={`px-1 py-0.5 rounded-sm transition hover:bg-zinc-100 dark:hover:bg-zinc-800 ${isHome ? 'text-[#50c7c2] font-bold' : 'hover:text-[#50c7c2]'}`}>
        {isGreek ? 'Î‘ÏÏ‡Î¹ÎºÎ®' : 'Home'}
      </a>
      <a href={`${base}/blog`} class={`px-1 py-0.5 rounded-sm transition hover:bg-zinc-100 dark:hover:bg-zinc-800 ${isArticles ? 'text-[#50c7c2] font-bold' : 'hover:text-[#50c7c2]'}`}>
        {isGreek ? 'Î†ÏÎ¸ÏÎ±' : 'Articles'}
      </a>
      <a href={`${base}/contact`} class={`px-1 py-0.5 rounded-sm transition hover:bg-zinc-100 dark:hover:bg-zinc-800 ${isContact ? 'text-[#50c7c2] font-bold' : 'hover:text-[#50c7c2]'}`}>
        {isGreek ? 'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±' : 'Contact'}
      </a>

      {!disableLangSwitch && (
        <a
          href={langSwitchHref}
          class="px-1 py-0.5 rounded-sm hover:bg-zinc-100 dark:hover:bg-zinc-800 transition hover:text-[#50c7c2]"
          target="_self"
          data-force-reload
        >
          {isGreek ? 'English ğŸ‡¬ğŸ‡§' : 'Î•Î»Î»Î·Î½Î¹ÎºÎ¬ ğŸ‡¬ğŸ‡·'}
        </a>
      )}

      <ThemeButton client:load />

      <a href="/login" class="px-1 py-0.5 rounded-sm text-[#50c7c2] hover:underline transition hover:bg-zinc-100 dark:hover:bg-zinc-800">
        ğŸ” {isGreek ? 'Î•Î¯ÏƒÎ¿Î´Î¿Ï‚' : 'Login'}
      </a>
    </div>
  </div>
</header>
