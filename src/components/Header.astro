---
const user = Astro.props?.user || null;
const lang = Astro.props?.lang || 'el';

const isGreek = lang === 'el';
const base = isGreek ? '/el' : '/en';

// Intelligent language switching
const currentPath = Astro.url.pathname;
const pathWithoutLang = currentPath.replace(/^\/(el|en)/, '');
const pathForGreek = `/el${pathWithoutLang}`;
const pathForEnglish = `/en${pathWithoutLang}`;
---

<header class="w-full border-b border-zinc-200 bg-white dark:bg-zinc-950 shadow-sm px-6 py-4">
  <div class="flex justify-between items-center max-w-screen-xl mx-auto">
    <!-- Î›Î¿Î³ÏŒÏ„Ï…Ï€Î¿ -->
    <a href="/" class="text-3xl tracking-tight flex items-center leading-none" style="font-family: 'Lora', serif;">
      <span class="font-bold text-black">Hit</span>
      <span class="font-normal text-[#50c7c2] ml-1">lift</span>
    </a>

    <!-- Î Î»Î¿Î®Î³Î·ÏƒÎ· -->
    <nav class="flex items-center gap-6 text-base font-medium text-zinc-700 dark:text-zinc-300">
      <a href={`${base}/`} class="hover:text-[#50c7c2] transition">
        {isGreek ? 'Î‘ÏÏ‡Î¹ÎºÎ®' : 'Home'}
      </a>
      <a href={`${base}/blog`} class="hover:text-[#50c7c2] transition">
        {isGreek ? 'Î†ÏÎ¸ÏÎ±' : 'Articles'}
      </a>
      <a href={`${base}/contact`} class="hover:text-[#50c7c2] transition">
        {isGreek ? 'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±' : 'Contact'}
      </a>

      {user && (
        <>
          <a href="/dashboard" class="hover:text-[#50c7c2] transition">
            ğŸ“‹ {isGreek ? 'Î Î¯Î½Î±ÎºÎ±Ï‚' : 'Dashboard'}
          </a>
          <a href={`${base}/blog/editor`} class="hover:text-[#50c7c2] transition">
            ğŸ“ {isGreek ? 'Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±' : 'Editor'}
          </a>
          <a href="/api/logout" class="text-red-600 hover:underline">
            ğŸšª {isGreek ? 'Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·' : 'Logout'}
          </a>
        </>
      )}

      {!user && (
        <a href="/login" class="text-[#50c7c2] hover:underline">
          ğŸ” {isGreek ? 'Î•Î¯ÏƒÎ¿Î´Î¿Ï‚' : 'Login'}
        </a>
      )}

      <!-- Î“Î»ÏÏƒÏƒÎ± -->
      <div class="ml-2 flex items-center gap-2 text-sm">
        {isGreek ? (
          <a href={pathForEnglish} class="hover:text-[#50c7c2]">
            English ğŸ‡¬ğŸ‡§
          </a>
        ) : (
          <a href={pathForGreek} class="hover:text-[#50c7c2]">
            Î•Î»Î»Î·Î½Î¹ÎºÎ¬ ğŸ‡¬ğŸ‡·
          </a>
        )}
      </div>
    </nav>
  </div>
</header>
