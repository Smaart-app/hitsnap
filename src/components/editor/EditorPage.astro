---
import Layout from '../../layouts/Layout.astro';
import ArticleForm from './ArticleForm.astro';

const { user, article } = Astro.props;
const lang = Astro.params.lang || 'el';
const isGreek = lang === 'el';
const isEditMode = !!article;

const pageTitle = isEditMode 
  ? (isGreek ? `Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±: ${article.title}` : `Edit: ${article.title}`)
  : (isGreek ? 'Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î†ÏÎ¸ÏÎ¿Ï…' : 'Create Article');

const backUrl = isEditMode 
  ? `/${lang}/blog/${article.slug}`
  : `/${lang}/blog`;

const backText = isEditMode
  ? (isGreek ? 'â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î¿ Î¬ÏÎ¸ÏÎ¿' : 'â† Back to article')
  : (isGreek ? 'â† Î•Ï€Î¹ÏƒÏ„ÏÎ¿Ï†Î® ÏƒÏ„Î± Î¬ÏÎ¸ÏÎ±' : 'â† Back to blog');
---

<Layout title={`${pageTitle} | Hitlift`} lang={lang} user={user}>
  <main class="max-w-6xl mx-auto px-4 py-12">
    <a href={backUrl} class="inline-block text-sm text-[#50c7c2] hover:underline mb-4">
      {backText}
    </a>

    <div class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-bold">
        {isEditMode ? 'âœï¸' : 'ğŸ“'} {pageTitle}
      </h1>
      <div id="statusIndicator" class="px-3 py-1 rounded-full text-sm font-medium border"></div>
    </div>
    
    <div id="feedback"></div>

    <!-- Î•Î´Ï Î¼ÏŒÎ½Î¿ Ï„Î¿ ArticleForm, Ï‡Ï‰ÏÎ¯Ï‚ Î´Î¹ÎºÏŒ ÏƒÎ¿Ï… <form> Î® id="articleForm"! -->
    <ArticleForm
      article={article}
      user={user}
      mode={isEditMode ? "edit" : "new"}
      onSuccessUrl={backUrl}
      lang={lang}
    />
  </main>
</Layout>
