---
import Layout from '../../../layouts/Layout.astro';
import { getArticles } from '../../../utils/getArticles';

const { lang } = Astro.params;
const articles = await getArticles(lang);
---

<Layout>
  <main class="max-w-3xl mx-auto py-12 px-4">
    <h1 class="text-3xl font-bold mb-8">📰 {lang === 'el' ? 'Άρθρα' : 'Articles'}</h1>

    {articles.length === 0 ? (
      <p class="text-gray-500">Δεν υπάρχουν άρθρα στη γλώσσα {lang}.</p>
    ) : (
      <ul class="space-y-10">
        {articles.map((article) => (
          <li class="border-b pb-4">
            <a href={`/${lang}/blog/${article.slug}`} class="block group">
              {article.data.image && (
                <img
                  src={article.data.image}
                  alt={article.data.title}
                  class="mb-4 w-full rounded-xl"
                />
              )}
              <h2 class="text-xl font-semibold group-hover:underline">
                {article.data.title}
              </h2>
              <p class="text-gray-600 mt-2">{article.data.excerpt}</p>
              <p class="text-sm text-gray-500 mt-1">{article.data.date}</p>
            </a>
          </li>
        ))}
      </ul>
    )}
  </main>
</Layout>
