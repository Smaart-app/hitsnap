---
import Layout from '@layouts/Layout.astro';
import LoginForm from '../../components/LoginForm.jsx';
import { createServerClient } from '@/lib/createServerClientAstro';

const lang = Astro.params?.lang || 'en';

const supabase = createServerClient(Astro.cookies);

const { data: { session } } = await supabase.auth.getSession();

if (session) {
  return Astro.redirect(`/${lang}/admin/preview`);
}
---

<Layout title="🔐 Είσοδος" lang={lang}>
  <main class="max-w-md mx-auto mt-24 p-6 bg-white rounded shadow">
    <h1 class="text-2xl font-bold mb-4">🔐 Σύνδεση στο Admin</h1>
    <LoginForm lang={lang} client:load />
  </main>
</Layout>
