---
import Layout from '../../../layouts/Layout.astro';

export const prerender = false;

export async function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'nl' } },
    { params: { lang: 'el' } },
  ];
}

const { lang } = Astro.params;

// μικρό i18n helper για 3 γλώσσες
function t(en: string, nl: string, el: string) {
  return lang === 'nl' ? nl : lang === 'el' ? el : en;
}

const title = t('About', 'Over', 'Σχετικά');

// Εικόνα & fallback (βάλε το portrait σου εδώ:)
const PORTRAIT = '/assets/images/portrait.jpg';           // προτείνεται: public/assets/images/portrait.jpg
const FALLBACK = '/article-images/pierrot-moment-snap.png'; // σίγουρα υπάρχει
---

<Layout title={title} lang={lang}>
  <section class="max-w-screen-xl mx-auto px-4 sm:px-6 py-10 grid gap-10 md:grid-cols-[1fr_1.2fr] items-start">
    <div class="order-2 md:order-1">
      <h1 class="text-3xl sm:text-4xl font-bold mb-4">{title}</h1>

      <p class="text-zinc-300 leading-relaxed mb-4">
        {t(
          "I’m a photographer exploring stillness, light and narrative. I create series that invite the viewer to slow down.",
          "Ik ben fotograaf en onderzoek stilte, licht en verhaal. Ik maak series die de kijker uitnodigen om te vertragen.",
          "Είμαι φωτογράφος που εξερευνά την ακινησία, το φως και την αφήγηση. Δημιουργώ σειρές που προσκαλούν τον θεατή να επιβραδύνει."
        )}
      </p>

      <p class="text-zinc-300 leading-relaxed mb-6">
        {t(
          "Available for editorial and personal commissions. Let’s talk about your project.",
          "Beschikbaar voor redactionele en persoonlijke αναθέσεις. Laten we praten over je project.",
          "Διαθέσιμη/ος για editorial και προσωπικές αναθέσεις. Ας μιλήσουμε για το project σου."
        )}
      </p>

      <a href={`/${lang}/contact`} class="inline-block bg-[#50c7c2] text-white px-6 py-3 rounded-full text-sm font-medium hover:opacity-90 transition">
        {t('Get in touch', 'Neem contact op', 'Επικοινώνησε')}
      </a>
    </div>

    <div class="order-1 md:order-2">
      <img
        id="about-portrait"
        src={PORTRAIT}
        alt="Portrait"
        class="w-full rounded-xl object-cover border border-zinc-800"
        loading="lazy"
        decoding="async"
        data-fallback={FALLBACK}
      />
    </div>
  </section>
</Layout>

<script>
  // Αν η portrait λείπει στο production, γύρνα σε fallback (Πιερότο)
  (function(){
    const img = document.getElementById('about-portrait');
    if (!img) return;
    const fb = img.getAttribute('data-fallback');
    img.addEventListener('error', () => {
      if (!fb) return;
      img.src = fb + '?v=' + Date.now();
    }, { once: true });
  })();
</script>
