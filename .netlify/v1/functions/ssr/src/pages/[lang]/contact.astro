---
import Layout from '../../layouts/Layout.astro';
import BackgroundSketch from '../../components/BackgroundSketch.astro';

const { lang } = Astro.params;
const isGreek = lang === 'el';
---

<Layout title={isGreek ? 'Επικοινωνία — Hitlift' : 'Contact — Hitlift'} lang={lang}>
  <div class="relative isolate min-h-[80vh] flex flex-col justify-center items-center text-center px-6 py-32 overflow-hidden bg-[#f4f3f0]">
    <BackgroundSketch class="absolute inset-0 opacity-10 z-0" />

    <h1 class="text-4xl font-bold tracking-tight sm:text-5xl relative z-10">
      {isGreek ? 'Επικοινώνησε μαζί μου' : 'Get in touch'}
    </h1>

    <p class="mt-6 text-lg leading-8 text-gray-600 max-w-xl mx-auto relative z-10">
      {isGreek
        ? 'Αν έχεις σχόλια, ιδέες ή απλώς θέλεις να πεις ένα γεια, είμαι εδώ.'
        : 'If you have feedback, ideas, or just want to say hello, I’m all ears.'}
    </p>

    <form
      class="mt-10 space-y-4 max-w-md w-full text-left relative z-10"
      on:submit|preventDefault={async (e) => {
        const formData = new FormData(e.target);
        const res = await fetch('/api/contact', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: formData.get('name'),
            email: formData.get('email'),
            message: formData.get('message')
          })
        });

        if (res.ok) {
          alert(isGreek ? 'Το μήνυμα εστάλη!' : 'Message sent!');
          e.target.reset();
        } else {
          alert(isGreek ? 'Κάτι πήγε στραβά.' : 'Something went wrong.');
        }
      }}
    >
      <input
        name="name"
        type="text"
        placeholder={isGreek ? 'Όνομα (προαιρετικό)' : 'Name (optional)'}
        class="w-full px-4 py-2 border rounded"
      />
      <input
        name="email"
        type="email"
        required
        placeholder={isGreek ? 'Το email σου' : 'Your email'}
        class="w-full px-4 py-2 border rounded"
      />
      <textarea
        name="message"
        required
        placeholder={isGreek ? 'Το μήνυμά σου' : 'Your message'}
        class="w-full px-4 py-2 border rounded min-h-[120px]"
      ></textarea>
      <button
        type="submit"
        class="bg-[#50c7c2] text-white px-6 py-2 rounded hover:opacity-90 transition"
      >
        {isGreek ? 'Αποστολή' : 'Send'}
      </button>
    </form>
  </div>
</Layout>
